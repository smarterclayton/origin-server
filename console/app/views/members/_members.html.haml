:css
  table.members { 
    margin-bottom: 10px;
  }
  table.members td, table.members th { vertical-align: middle; padding-left: 10px; padding-right: 10px; }
  table.members select { 
    margin-bottom: 0;
    width: 100%;
  }

  table.members a.remove-member {
    color: inherit;
    display: inline-block;
    font-size: 20px;
    font-weight: bold;
    height: 20px;
    line-height: 20px;
    margin: 0;
    padding: 0;
    width: 22px;
    text-align: center;
    text-decoration: none !important;
  }
%noscript
  :css
    a.remove-member { display: none !important; }

- content_for :javascripts do
  :javascript
    $(function(){
      $('a.remove-member').click(function(){
        $(this).css({visibility:'hidden'}).closest('tr').hide().find('select').val('none');
      });
    });


= form_tag domain_members_path(domain), :method => :put do
  %table.table.table-condensed.members
    %tr
      %td= members.find(&:owner).name
      %td Owner
      - if editable
        %td

    - members.reject(&:owner).sort.each do |member|
      %tr
        %td
          = member.name
        - if editable
          %td
            = hidden_field_tag('members[][id]', member.id)
            = select_tag('members[][role]', options_for_select(Role.role_descriptions_descending, {:selected => member.role}))
          %td
            = link_to('&times;'.html_safe, 'javascript:;', :class => 'remove-member')
        - else
          %td
            = member.role.humanize

  - if editable && members.reject(&:owner).present?
    .form-actions
      = submit_tag "Save changes", :class => 'btn btn-small'
